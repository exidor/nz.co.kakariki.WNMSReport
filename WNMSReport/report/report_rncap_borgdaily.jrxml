<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="report_rncap_borgdaily" language="groovy" pageWidth="595" pageHeight="842" columnWidth="534" leftMargin="30" rightMargin="30" topMargin="30" bottomMargin="30">
	<template>"style_template.jrtx"</template>
	<parameter name="logo" class="java.lang.String"/>
	<parameter name="static" class="java.lang.String"/>
	<queryString>
		<![CDATA[
		select distinct id
        from report_borg_daily_t
		order by id asc
        ]]>
	</queryString>
	<field name="id" class="java.lang.String"/>
	<variable name="RNC" class="java.lang.String">
		<variableExpression><![CDATA[$F{id}]]></variableExpression>
	</variable>
	<background>
		<band/>
	</background>
	<title>
		<band height="38">
			<frame>
				<reportElement mode="Opaque" x="0" y="0" width="535" height="37" backcolor="#FFFFFF"/>
				<staticText>
					<reportElement x="0" y="0" width="356" height="35" forecolor="#000000" style="style_reportheader"/>
					<text><![CDATA[RNC AP Daily Occupancy Report]]></text>
				</staticText>
				<image>
					<reportElement x="394" y="0" width="141" height="34"/>
					<imageExpression class="java.lang.String"><![CDATA[$P{logo}]]></imageExpression>
				</image>
			</frame>
		</band>
	</title>
	<pageHeader>
		<band/>
	</pageHeader>
	<detail>
		<band height="400">
			<textField>
				<reportElement mode="Opaque" x="0" y="0" width="535" height="30" backcolor="#FFFFFF"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="SansSerif" size="12" isBold="true" />
				</textElement>
				<textFieldExpression><![CDATA["Processor Occupancy Report for "+$V{RNC}]]></textFieldExpression>
			</textField>
			<subreport>
				<reportElement x="0" y="30" width="535" height="232"/>
				<subreportParameter name="rncname">
					<subreportParameterExpression><![CDATA[$V{RNC}]]></subreportParameterExpression>
				</subreportParameter>
				<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
				<subreportExpression class="java.lang.String"><![CDATA["report_rncap_borgdaily_occupancy.jasper"]]></subreportExpression>
			</subreport>
			<subreport>
				<reportElement x="0" y="262" width="535" height="100"/>
				<subreportParameter name="rncname">
					<subreportParameterExpression><![CDATA[$V{RNC}]]></subreportParameterExpression>
				</subreportParameter>
				<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
				<subreportExpression class="java.lang.String"><![CDATA["report_rncap_borgdaily_data.jasper"]]></subreportExpression>
			</subreport>
		</band>
		<band height="220">
			<staticText>
				<reportElement x="0" y="0" width="535" height="20"	style="style_tableheader" />
				<textElement textAlignment="Left" verticalAlignment="Middle">
					<font fontName="SansSerif" size="12" isBold="true" />
				</textElement>
				<text><![CDATA[Definitions]]></text>
			</staticText>
			<staticText>
				<reportElement x="0" y="20" width="535" height="200"	style="style_tableheader" />
				<textElement textAlignment="Left" verticalAlignment="Middle">
					<font fontName="SansSerif" size="10" isBold="false" />
				</textElement>
				<text><![CDATA[
						RAB : Radio Access Bearer, Processor
						PC : Protocol Converter, Processor
						TMU : Traffic Management Unit, Processor

						PO (Yesterday) : Yesterdays Maximum 5min sampled Occupancy
						PO (1 Week Ago) : Maximum 5min sampled Occupancy from the same day 1 week ago

						The data points for this report come from the "Telecom Service Management Server", Borg. This data is generated by sampling RNC Processor Occupancy at 5min intervals. For this report that data is aggregated by averaging across AP type and then finding the maximum daily value of this average. While RAB and PC occupancy data is averaged as is commonly understood, to find the 'average' value for 12 TMU processors we divide the sum of these occupancies by 10. In this way only the 10 active TMU processors are considered. The spare TMU value is calculated from the maximum hourly average of the two least utilised TMU processors per day.
				]]></text>
			</staticText>
	</band>
	</detail>
	<pageFooter>
		<band height="17">
			<textField>
				<reportElement mode="Opaque" x="200" y="0" width="335" height="17" backcolor="#FFFFFF" style="style_charttitle"/>
				<textElement textAlignment="Right"/>
				<textFieldExpression class="java.lang.String"><![CDATA["Page "+$V{PAGE_NUMBER}]]></textFieldExpression>
			</textField>
			<textField pattern="EEEEE dd MMMMM yyyy">
				<reportElement x="0" y="0" width="200" height="17" style="style_charttitle"/>
				<textElement/>
				<textFieldExpression class="java.util.Date"><![CDATA[new java.util.Date()]]></textFieldExpression>
			</textField>
		</band>
	</pageFooter>
	<summary>
		<band/>
	</summary>
</jasperReport>
